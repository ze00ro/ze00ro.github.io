---
layout: dev
title: "问题研讨会：只读库操作更新的一次问题"
categories: [article, program]
tags: 

---

今天上完线有人报告一处地址更新报错，但是在开发测试环境都没问题，

看日志是没有权限，我们的 php 框架里有两个连接数据库的方法

``` php
model();
modelr();
```

上面那个是主库的，下面带 `r` 的是 readonly 的意思，是只读库。

### 问题

 - 区分度比较小，有时候没注意就写错
 - 自己写的框架，短平快，没文档说明
 - 开发测试环境都没有只读库，都连的主库，所以发现不了问题

### 总结

 - 区分度比较小，这次就不改了，以后新方法要更好的区分
 - 开发测试环境增加了只读帐号，实现只读连接，方便发现问题


